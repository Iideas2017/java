# 单例模式

##  单例模式概述

　　单例模式（Singleton），也叫单子模式，是一种常用的设计模式。在应用这个模式时，单例对象的类必须保证**只有一个实例存在**。许多时候，整个系统只需要拥有一个的全局对象，这样有利于我们协调系统整体的行为。比如在某个服务器程序中，该服务器的配置信息存放在一个文件中，这些配置数据由一个单例对象统一读取，然后服务进程中的其他对象再通过这个单例对象获取这些配置信息，显然，这种方式简化了在复杂环境下的配置管理。

　　特别地，在计算机系统中，**线程池、缓存、日志对象、对话框、打印机、显卡的驱动程序对象常被设计成单例。**事实上，这些应用都或多或少具有资源管理器的功能。例如，每台计算机可以有若干个打印机，但只能有一个 Printer Spooler \(单例\) ，以避免两个打印作业同时输出到打印机中。再比如，每台计算机可以有若干通信端口，系统应当集中\(单例\) 管理这些通信端口，以避免一个通信端口同时被两个请求同时调用。总之，选择单例模式就是为了避免不一致状态，避免政出多头。

　　综上所述，单例模式就是为**确保一个类只有一个实例**，并为**整个系统提供一个全局访问点的一种方法。**

## 

## 

### 六. 小结 {#六-小结}

　　本文首先介绍了单例模式的定义和结构，并给出了其在单线程和多线程环境下的几种经典实现。特别地，我们知道，**传统的饿汉式单例无论在单线程还是多线程环境下都是线程安全的，但是传统的懒汉式单例在多线程环境下是非线程安全的。**为此，我们特别介绍了五种方式来在多线程环境下创建线程安全的单例，包括：

* 使用synchronized方法实现懒汉式单例；
* 使用synchronized块实现懒汉式单例；
* 使用静态内部类实现懒汉式单例；
* 使用双重检查模式实现懒汉式单例；
* 使用ThreadLocal实现懒汉式单例；

　　当然，实现懒汉式单例还有其他方式。但是，这五种是比较经典的实现，也是我们应该掌握的几种实现方式。从这五种实现中，我们可以总结出，**要想实现效率高的线程安全的单例，我们必须注意以下两点：**

* **尽量减少同步块的作用域；**
* **尽量使用细粒度的锁。**



