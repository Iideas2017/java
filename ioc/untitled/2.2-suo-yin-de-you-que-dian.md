# 2.2 索引的优缺点

## 1. 索引的优点

* 大大加快数据的检索速度，这也是创建索引的最主要的原因；
* 加速表和表之间的连接；
* 在使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间；
* 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性；

## 2. 索引的缺点

* 时间方面：创建索引和维护索引要耗费时间，具体地，当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度；
* 空间方面：索引需要占物理空间。

## 3\). 什么情况下设置了索引但无法使用？

* 以“%\(表示任意0个或多个字符\)”开头的LIKE语句，模糊匹配；
* OR语句前后没有同时使用索引；
* 数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）；
* 对于多列索引，必须满足 **最左匹配原则** \(eg：多列索引col1、col2和col3，则 索引生效的情形包括 col1或col1，col2或col1，col2，col3\)。

## 4\). 什么样的字段适合创建索引？

* 经常作查询选择的字段
* 经常作表连接的字段
* 经常出现在order by, group by, distinct 后面的字段

## 5\). 创建索引时需要注意什么？

* 非空字段：应该指定列为NOT NULL，除非你想存储NULL。在mysql中，含有空值的列很难进行查询优化，因为它们使得索引、索引的统计信息以及比较运算更加复杂。你应该用0、一个特殊的值或者一个空串代替空值；
* 取值离散大的字段：（变量各个取值之间的差异程度）的列放到联合索引的前面，可以通过count\(\)函数查看字段的差异值，返回值越大说明字段的唯一值越多字段的离散程度高；
* 索引字段越小越好：数据库的数据存储以页为单位一页存储的数据越多一次IO操作获取的数据越大效率越高。

